(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[740],{4941:function(e,t,s){Promise.resolve().then(s.bind(s,277))},277:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return l}});var a=s(7437),r=s(2265),i=s(2141);function l(){let[e,t]=(0,r.useState)({totalVisits:0,browsers:{},operatingSystems:{},recentVisits:[],todayVisits:0,lastWeekVisits:0}),[s,l]=(0,r.useState)(!0),d=e=>{let t={},s={},a=new Date,r=new Date(a.getFullYear(),a.getMonth(),a.getDate()),i=new Date(r.getTime()-6048e5),l=0,d=0;return e.forEach(e=>{t[e.browser]=(t[e.browser]||0)+1,s[e.os]=(s[e.os]||0)+1;let a=new Date(e.timestamp);a>=r&&l++,a>=i&&d++}),{totalVisits:e.length,browsers:t,operatingSystems:s,recentVisits:e.slice(0,50),todayVisits:l,lastWeekVisits:d}};(0,r.useEffect)(()=>{async function e(){try{let{data:e,error:s}=await i.O.from("visitor_logs").select("*").order("timestamp",{ascending:!1});if(s){console.error("Error fetching logs:",s);return}t(d(e||[]))}catch(e){console.error("Failed to fetch logs:",e)}finally{l(!1)}}e();let s=i.O.channel("visitor_logs_changes").on("postgres_changes",{event:"*",schema:"public",table:"visitor_logs"},()=>e()).subscribe();return()=>{s.unsubscribe()}},[]);let c=(e,t)=>0===t?0:(e/t*100).toFixed(1);return s?(0,a.jsx)("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 p-8 flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-xl text-gray-600 dark:text-gray-400",children:"Loading visitor statistics..."})}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 p-4 sm:p-8",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto space-y-8",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Visitor Statistics"}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Last updated: ",new Date().toLocaleString()]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Total Visits"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:e.totalVisits})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Today's Visits"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:e.todayVisits}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:[c(e.todayVisits,e.totalVisits),"% of total"]})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Last 7 Days"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400",children:e.lastWeekVisits}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:[c(e.lastWeekVisits,e.totalVisits),"% of total"]})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Avg. Daily Visits"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-orange-600 dark:text-orange-400",children:(e.lastWeekVisits/7).toFixed(1)}),(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:"Last 7 days"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-800 dark:text-gray-200 mb-4",children:"Browser Distribution"}),(0,a.jsx)("div",{className:"space-y-4",children:Object.entries(e.browsers).sort((e,t)=>{let[,s]=e,[,a]=t;return a-s}).map(t=>{let[s,r]=t,i=c(r,e.totalVisits);return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:s}),(0,a.jsxs)("span",{className:"font-semibold text-gray-800 dark:text-gray-200",children:[r," (",i,"%)"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-blue-600 dark:bg-blue-500 h-2 rounded-full",style:{width:"".concat(i,"%")}})})]},s)})})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-800 dark:text-gray-200 mb-4",children:"Operating Systems"}),(0,a.jsx)("div",{className:"space-y-4",children:Object.entries(e.operatingSystems).sort((e,t)=>{let[,s]=e,[,a]=t;return a-s}).map(t=>{let[s,r]=t,i=c(r,e.totalVisits);return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:s}),(0,a.jsxs)("span",{className:"font-semibold text-gray-800 dark:text-gray-200",children:[r," (",i,"%)"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-purple-600 dark:bg-purple-500 h-2 rounded-full",style:{width:"".concat(i,"%")}})})]},s)})})]})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-800 dark:text-gray-200",children:"Recent Visits"})}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,a.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-900",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Date & Time"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"IP Address"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Browser"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"OS"})]})}),(0,a.jsx)("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:e.recentVisits.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:new Date(e.timestamp).toLocaleString()}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:e.ip}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:e.browser}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:e.os})]},e.id))})]})})]})]})})}},2141:function(e,t,s){"use strict";s.d(t,{O:function(){return a}});let a=(0,s(3777).eI)("https://rvwheasxzdljqebfgcax.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJ2d2hlYXN4emRsanFlYmZnY2F4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzI3MTEyNjUsImV4cCI6MjA0ODI4NzI2NX0.ggqik1kMyJEAtzwk72iaQzWBTRiYETDI_JMKgLlvv3w")}},function(e){e.O(0,[777,971,117,744],function(){return e(e.s=4941)}),_N_E=e.O()}]);