(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[740],{4941:function(e,t,s){Promise.resolve().then(s.bind(s,277))},277:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return c}});var r=s(7437),a=s(2265),i=s(2141);function c(){let[e,t]=(0,a.useState)({totalVisits:0,browsers:{},operatingSystems:{},recentVisits:[]}),[s,c]=(0,a.useState)(!0),l=e=>{let t={},s={};return e.forEach(e=>{t[e.browser]=(t[e.browser]||0)+1,s[e.os]=(s[e.os]||0)+1}),{totalVisits:e.length,browsers:t,operatingSystems:s,recentVisits:e.slice(0,50)}};return((0,a.useEffect)(()=>{async function e(){try{let{data:e,error:s}=await i.O.from("visitor_logs").select("*").order("timestamp",{ascending:!1});if(s){console.error("Error fetching logs:",s);return}t(l(e||[]))}catch(e){console.error("Failed to fetch logs:",e)}finally{c(!1)}}e();let s=i.O.channel("visitor_logs_changes").on("postgres_changes",{event:"*",schema:"public",table:"visitor_logs"},()=>e()).subscribe();return()=>{s.unsubscribe()}},[]),s)?(0,r.jsx)("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 p-8 flex items-center justify-center",children:(0,r.jsx)("div",{className:"text-xl text-gray-600 dark:text-gray-400",children:"Loading visitor statistics..."})}):(0,r.jsx)("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 p-4 sm:p-8",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto space-y-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Visitor Statistics"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Total Visits"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:e.totalVisits})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-4",children:"Top Browsers"}),(0,r.jsx)("div",{className:"space-y-2",children:Object.entries(e.browsers).sort((e,t)=>{let[,s]=e,[,r]=t;return r-s}).slice(0,3).map(e=>{let[t,s]=e;return(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:t}),(0,r.jsx)("span",{className:"font-semibold text-gray-800 dark:text-gray-200",children:s})]},t)})})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-4",children:"Top Operating Systems"}),(0,r.jsx)("div",{className:"space-y-2",children:Object.entries(e.operatingSystems).sort((e,t)=>{let[,s]=e,[,r]=t;return r-s}).slice(0,3).map(e=>{let[t,s]=e;return(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:t}),(0,r.jsx)("span",{className:"font-semibold text-gray-800 dark:text-gray-200",children:s})]},t)})})]})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:[(0,r.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-800 dark:text-gray-200",children:"Recent Visits"})}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,r.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-900",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Date & Time"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"IP Address"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Browser"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"OS"})]})}),(0,r.jsx)("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:e.recentVisits.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:new Date(e.timestamp).toLocaleString()}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:e.ip}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:e.browser}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:e.os})]},e.id))})]})})]})]})})}},2141:function(e,t,s){"use strict";s.d(t,{O:function(){return r}});let r=(0,s(3777).eI)("https://rvwheasxzdljqebfgcax.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJ2d2hlYXN4emRsanFlYmZnY2F4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzI3MTEyNjUsImV4cCI6MjA0ODI4NzI2NX0.ggqik1kMyJEAtzwk72iaQzWBTRiYETDI_JMKgLlvv3w")}},function(e){e.O(0,[777,971,117,744],function(){return e(e.s=4941)}),_N_E=e.O()}]);